四元数（Quaternion）是一种数学表示法，广泛应用于计算机图形学和游戏引擎中，用于处理三维空间中的旋转。与传统的欧拉角和旋转矩阵相比，四元数有以下几个优点：

- **避免万向节死锁**：万向节死锁是指在使用欧拉角表示旋转时，某些角度组合会导致两个旋转轴重合，失去一个自由度。四元数通过四个参数来表示旋转，不存在这种问题。
- **平滑插值**：四元数可以通过球形线性插值（Slerp）进行平滑插值，非常适合处理旋转动画。
- **计算效率高**：四元数的乘法运算比旋转矩阵更高效，特别是在连续旋转的情况下。

四元数通常表示为 \( q = w + xi + yj + zk \)，其中 \( w, x, y, z \) 是实数，\( i, j, k \) 是虚数单位，满足 \( i^2 = j^2 = k^2 = ijk = -1 \)。

在游戏引擎中，四元数通常用于：

- **表示和计算物体的旋转**：例如摄像机的方向、角色的朝向等。
- **实现平滑的旋转动画**：通过四元数插值可以实现平滑的旋转过渡。
- **物理引擎中的刚体运动**：四元数用于表示刚体的旋转状态，进行物理模拟。

以下是一个简单的四元数乘法示例，用于组合两个旋转：

```cpp
struct Quaternion {
    float w, x, y, z;
    
    Quaternion operator*(const Quaternion& q) const {
        return {
            w * q.w - x * q.x - y * q.y - z * q.z,
            w * q.x + x * q.w + y * q.z - z * q.y,
            w * q.y - x * q.z + y * q.w + z * q.x,
            w * q.z + x * q.y - y * q.x + z * q.w
        };
    }
};
```

这个例子展示了如何实现四元数的乘法运算，可以用于组合两个旋转。这种表示法在现代游戏引擎中非常常见，如Unity和Unreal Engine。