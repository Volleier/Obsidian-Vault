在游戏引擎中，3D旋转的表示方法和处理是至关重要的。3D旋转涉及到不同的数学工具和技术，包括欧拉角、四元数以及相关的问题。以下是关于这些概念的详细解释：

# [[3D旋转中的数学/欧拉角|欧拉角（Euler Angles）]]

欧拉角是一种用三个角度来表示三维空间中的旋转的方法。通常，这三个角度分别表示绕三个坐标轴的旋转。常见的表示方式包括：

- X轴旋转（滚转）：绕X轴的旋转。
- Y轴旋转（俯仰）：绕Y轴的旋转。
- Z轴旋转（偏航）：绕Z轴的旋转。

这些角度可以在不同的顺序下应用，例如绕Z轴旋转，然后绕X轴旋转，再绕Y轴旋转，这种顺序被称为欧拉角的顺序。
## 欧拉角的缺点
- 万向节死锁：如上所述，欧拉角容易遭遇万向节死锁问题。
- 顺序依赖：旋转顺序的不同会导致不同的结果，增加了复杂性。
- 不连续性：欧拉角表示方式可能在旋转角度的范围内产生不连续的变化，导致计算不稳定。
- 插值困难：在执行旋转插值（例如平滑过渡）时，欧拉角处理起来较为复杂。
# [[3D旋转中的数学/欧拉角的顺序依赖|欧拉角的顺序依赖]]

欧拉角的顺序依赖指的是在应用旋转时，旋转的顺序会影响最终的结果。不同的旋转顺序会导致不同的最终姿态，这种现象称为顺序依赖性。例如，绕X、Y、Z轴的旋转顺序与绕Z、Y、X轴的顺序会得到不同的结果。

# [[3D旋转中的数学/万向节死锁|万向节死锁（Gimbal Lock）]]

万向节死锁是使用欧拉角时遇到的一个问题。它发生在旋转角度达到特定值时（如90度），导致一个旋转轴与另一个旋转轴对齐，从而失去了一个旋转自由度。这种现象使得系统在旋转时失去某些自由度，无法实现某些角度的旋转。

# [[3D旋转中的数学/四元数|四元数（Quaternions）]]

四元数是一种用于表示和计算3D旋转的数学工具。它由四个部分组成（一个标量和三个虚数单位），通常表示为 \( q = w + xi + yj + zk \)，其中 \(w\)、\(x\)、\(y\)、\(z\) 是四个分量。

四元数的优点包括：

- 避免万向节死锁：由于四元数表示旋转不依赖于旋转顺序，因此避免了万向节死锁问题。
- 插值友好：四元数支持平滑插值（如球形线性插值，SLERP），使得动画中的旋转过渡更加自然。
- 计算高效：四元数运算（如旋转和插值）比欧拉角计算更高效且更稳定。

## 四元数的基本操作

- 旋转表示：四元数可以用来表示绕任意轴的旋转。
- 旋转组合：两个旋转可以通过四元数的乘法来组合。
- 归一化：四元数应当被归一化，以确保其表示的是有效的旋转。

## 四元数与欧拉角的转换

在实际应用中，常常需要在四元数和欧拉角之间进行转换，以便在不同的系统或功能中使用。虽然四元数在旋转计算中表现优越，但有时欧拉角更直观易懂，特别是在用户输入和动画设计中。
