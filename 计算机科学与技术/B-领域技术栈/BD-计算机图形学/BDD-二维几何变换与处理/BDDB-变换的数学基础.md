# 变换的数学基础
**二维图形变换是对图形的几何坐标进行的操作，其最终结果表现为每个像素点的颜色被重新计算和放置。**
二维图形的变换是计算机图形学中的核心内容，其数学基础主要建立在线性代数、向量几何和齐次坐标系统之上，主要以下几个部分组成：基本变换类型、齐次坐标、变换的组合和级联、几何基础与向量运算


# 基本变换类型
## 平移变换
将图形中的每个点沿指定方向移动固定距离

### 数学表示
#### 非齐次坐标
$$
\begin{gather}
x'=x+t_x \\
y'=y+t_y
\end{gather}
​$$
#### 齐次坐标矩阵（3×3）
$$
M_{\text{trans}}(t_x, t_y) = \begin{bmatrix}
1 & 0 & t_x \\
0 & 1 & t_y \\
0 & 0 & 1
\end{bmatrix}
$$

### 几何意义
- 保持图形形状、大小、方向不变
- 仅改变图形位置
- 无法用2×2线性变换矩阵表示
## 缩放变换
沿坐标轴方向拉伸或压缩图形。

### 数学表示
#### 非齐次坐标

$$
\begin{gather}
    x'=s_x \cdot x \\ 
    y'=s_y\cdot y
\end{gather}
​$$

    
#### 齐次坐标矩阵
$$

M_{\text{scale}}{(S_y,S_y)} = \begin{bmatrix}
s_x & 0 & 0 \\
0 & s_y & 0 \\
0 & 0 & 1
\end{bmatrix}
$$
类型：
- 均匀缩放：$s_x=s_y$​，保持形状比例
- 非均匀缩放：$sx \neq sy​$，产生拉伸或压缩变形

### 几何性质
- 当 $s_x,s_y>1$ 时，图形放大
- 当 $0<s_x,s_y<1$ 时，图形缩小
- 当缩放因子为负时，产生反射效果

## 旋转变换
绕指定点（通常为原点）旋转图形一定角度

### 数学表示
#### 非齐次坐标：  
$$
\begin{gather}
    x'=x\cos ⁡\theta − y\sin⁡ \theta \\ 
    y'=x\sin⁡ \theta + y\cos⁡ \theta
\end{gather}
​$$
#### 齐次坐标矩阵：
$$
M_{\text{rotate}}(\theta) = \begin{bmatrix}
\cos \theta & -\sin \theta & 0 \\
\sin \theta & \cos \theta & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

方向约定：
- 逆时针旋转：$\theta > 0$（标准约定）
- 顺时针旋转：$\theta < 0$

### 重要性质：
- 旋转矩阵是正交矩阵：$R^{−1}(\theta)=R^T(\theta)=R(−\theta)$
- 保持向量长度和角度不变
- 旋转中心为原点

## 反射变换
生成图形关于某条直线（轴）的镜像
常见反射矩阵：
- 关于X轴反射：
$$
F_{x} = \begin{bmatrix}
1 & 0 & 0 \\
0 & -1 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$
- 关于Y轴反射：
$$
F_{y} = \begin{bmatrix}
-1 & 0 & 0 \\
0 & 1 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

- 关于直线 $y=x$ 反射：
$$
F_{x=y} = \begin{bmatrix}
0 & 1 & 0 \\
1 & 0 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

### 几何特性
- 行列式值为 $-1$
- 属于等距变换（保持距离不变）
- 改变图形的手性（左右手性互换）

## 错且变换
使图形沿某一方向发生倾斜变形

### 数学表示
#### X方向错切：
$$
H_{x}{(sh_x)} = \begin{bmatrix}
1 & sh_x & 0 \\
0 & 1 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$


$x'=x+sh_x \cdot y, y'=y$
#### Y方向错切：
$$
H_{y}{(sh_y)} = \begin{bmatrix}
1 & 0 & 0 \\
sh_y & 1 & 0 \\
0 & 0 & 1
\end{bmatrix}
$$

$x'=x,y'=sh_y \cdot x+y$

### 几何效果
- 保持面积不变
- 将矩形变为平行四边形
- 在字体倾斜、三维投影中有应用

# 齐次坐标（Homogeneous Coordinates）
齐次坐标，英文名Homogeneous Coordinates，在平移变换无法用2×2矩阵统一表示，导致变换组合复杂化的情况下使用，齐次坐标可将二维点从$(x,y)$扩展为三维齐次坐标 $(x,y,w)$。

## 定义与表示
- 基本定义

- 归一化处理

# 变换的组合与级联


## 基本原理
多个变换按顺序应用，等价于单个复合变换
数学原理：
- 对点 $P$ 依次应用变换 $T_1,T_2,…,Tn$​
- 最终结果：$P'=T_n(⋯ T_2(T_1(P)) ⋯ )$
-  矩阵形式：$P'=M_n ⋯ M_2 \cdot M_1 \cdot P$

### 矩阵乘法顺序
变换应用顺序与矩阵乘法顺序**相反**。
示例：先缩放 $S$，后旋转 $R$，再平移 $T$
- 正确：$M=T \cdot R \cdot S$
- 点变换：P′=T(R(S(P)))=(T⋅R⋅S)⋅PP′=T(R(S(P)))=(T⋅R⋅S)⋅P

### 复合变换示例

#### 3.3.1 绕任意点旋转

**步骤**：

1. 平移使旋转中心 C(cx,cy)C(cx​,cy​) 移至原点：T(−cx,−cy)T(−cx​,−cy​)
    
2. 绕原点旋转 θθ 角度：R(θ)R(θ)
    
3. 平移回原位置：T(cx,cy)T(cx​,cy​)
    

**复合矩阵**：

M=T(cx,cy)⋅R(θ)⋅T(−cx,−cy)M=T(cx​,cy​)⋅R(θ)⋅T(−cx​,−cy​)

#### 3.3.2 关于任意直线反射

设直线方程为：ax+by+c=0ax+by+c=0

**步骤**：

1. 平移使直线过原点：T(0,−c/b)T(0,−c/b)（假设 b≠0b=0）
    
2. 旋转使直线与X轴对齐：R(−α)R(−α)，其中 α=arctan⁡(a/b)α=arctan(a/b)
    
3. 关于X轴反射：FxFx​
    
4. 旋转回原方向：R(α)R(α)
    
5. 平移回原位置：T(0,c/b)T(0,c/b)

# 几何基础与向量运算


