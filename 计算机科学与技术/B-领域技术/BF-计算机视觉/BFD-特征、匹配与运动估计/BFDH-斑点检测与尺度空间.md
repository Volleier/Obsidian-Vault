
# 介绍

- 斑点（blob）指图像中在某一尺度范围内表现为局部极值、结构与背景显著不同的区域（例如圆形/椭圆形亮/暗斑点）。
- 本笔记覆盖尺度空间理论、常用斑点检测算子（LoG、DoG、Hessian／DoH）、尺度选择、仿射扩展与描述子提取的实践要点与示例。

## 尺度空间理论（Scale-space）

- 基本思想：图像中的结构在不同尺度上表现不同，使用一族平滑尺度（Gaussian）来表示。尺度参数通常用 σ 表示。
- 线性高斯尺度空间：L(x,y,σ) = G(x,y,σ) \* I(x,y)，其中 G 为二维高斯核。
- 尺度归一化（scale normalization）：为使不同尺度的响应可比较，常对导数响应做 σ^m 归一化（m 为导数阶数）。对 Laplacian 使用 σ^2 归一化。

## Laplacian of Gaussian (LoG)

- 定义：∇^2(G(·,σ) _ I) = (∇^2 G) _ I。
- 尺度归一化的 LoG 响应为 σ^2 |∇^2 L(x,y,σ)|，在尺度空间中寻找三维极值（x,y,σ）可检测不同大小的圆形/斑点。
- 数学要点：LoG 在尺度 σ 处对直径约为 sqrt(2)σ 的斑点响应最强。

## Difference of Gaussian (DoG)

- DoG(σ) = L(x,y,kσ) - L(x,y,σ)，是 LoG 的高效近似（当 k→1 时）。SIFT 等方法用 DoG 来检测尺度极值点。
- 优点：计算更便宜（只需两次高斯模糊），易于多尺度金字塔实现。

## Hessian / Determinant of Hessian (DoH)

- Hessian 矩阵 H = [[L_xx, L_xy],[L_xy, L_yy]]，其行列式 det(H) 给出基于二阶导数的斑点响应（对局部圆形结构敏感）。
- SURF 等利用快速近似的 Hessian 做检测与描述。

## 斑点检测的标准流程

1. 构建尺度空间（例如若干 σ 的金字塔，通常按 k 步长指数取样）。
2. 在每个尺度层计算响应（σ^2 ∇^2、DoG、或 det(H)）。
3. 在空间-尺度（x,y,σ）上进行非极大值抑制（3x3x3 邻域）。
4. 去除低对比点与边缘响应（例如通过 Hessian 的特征值比率来排除边缘状响应）。
5. 精确化定位（亚像素与亚尺度插值）并记录主方向（如需要）以便描述子归一化。

## 仿射／尺度协变扩展

- 对于更强的不变性，可使用 Harris-Affine、Hessian-Affine 或 MSER：检测协变区域，迭代估计仿射矩阵，使检测对视角/透视有更好鲁棒性。
- 流程（Hessian-Affine 范例）：先在尺度空间检测兴趣点 → 估计局部二阶矩（二阶矩矩阵）→ 迭代归一化区域 → 在归一化窗口上提取描述子（SIFT/RootSIFT 等）。

## 描述子与匹配（简要）

- 常用描述子：SIFT、RootSIFT（SIFT 的归一化变体）、SURF、ORB、DAISY。斑点检测常与 SIFT 配合：DoG 检测尺度极值 → 方向分配 → SIFT 描述。

## 参数选择与实践建议

- 尺度采样：通常每 octave 采样 3~6 个 σ（SIFT 常用 3），k = 2^(1/s)，s 为每 octave 的层数。
- σ 初值：可从 0.5~1.6 开始（SIFT 初始为 1.6），并按 octave 翻倍。
- 阈值：对 DoG/LoG 响应设置阈值去掉低对比点；对 det(H) 设置最小值滤噪。
- 边缘抑制：用 Hessian 的特征值比 r（大特征值/小特征值）判断，若 (Tr(H)^2 / Det(H)) > (r+1)^2/r 则舍弃（类似 Harris 的边缘判定）。
- 归一化：提取描述子前需按尺度做图像归一化（尺度与旋转），仿射扩展时需将局部区域标准化到圆形/正方形窗口。